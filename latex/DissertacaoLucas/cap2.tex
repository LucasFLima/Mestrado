 
\chapter{REFERENCIAL TEÓRICO}
\vspace{-6mm}

\section{COMPUTAÇÃO ORIENTADA A SERVIÇO}
\vspace{-6mm}


As empresas precisam estar preparadas para responder rápida e
eficientemente a mudanças impostas por novas regulações, por aumento de
competição ou ainda para usufruir de novas oportunidades. No contexto atual, em que as
informações fluem de modo extremamente veloz, o tempo disperdiçado pelas organizações para se
adaptar a um novo cenário tem um preço elevado, gerando expressiva perda de
receita e, em um determinados casos, podendo causar a falência.

No campo das instituições governamentais, a eficiência na condução das ações do
Estado impõem que a estrutura de troca de informações entre os mais variados
entes seja continuamente adaptável, mutuamente integrada. Pode-se tomar como
exemplo a edição de nova lei que implique alteração no cálculo do tempo de
serviço para aposentadoria. A nova fórmula deve se propagar para ser
aplicada em várias intituições que compõem a máquina pública.

Nessas situações, os sistemas de informação das organizações devem possibilitar
que a dinâmica de adaptação ocorra sem demora, sob pena de, em vez de serem
ferramental para apoiar continuamente os processos de negócio, se tornem entrave
para a ágil incorporação dos novos processos. Por outro lado, a nova
configuração deve se manter integra e funcional com o já complexo cenário de TI.

A eficiência na integração entre as soluções de TI é determinante para que se
consiga alterar uma parte sem comprometer todo o ecossistema. A integração
possibilita a combinação de eficiência e flexibilidade de recursos para otimizar
a operação através e além dos limites de uma organização e a habilita para
inteoperar facilmente \cite{papazoglou2008service}.

A computação orientada a serviços -- SOC -- endereça essas necessidades em uma
plataforma que aumenta a flexibilidade e melhora o alinhamento com o negócio, a
fim de reagir rapidamente a mudanças nos requisitos de negócio. Para obter esses
benefícios, os serviços devem cumprir com determinados quesitos, que incluem
alta autonomia ou baixo acoplamento \cite{erl2008soa}. Assim, o paradigma de SOC
está voltado para o projeto de soluções preparadas para constantes mudanças,
substituindo-se pequenas peças -- os serviços -- por outras.

Portando, o objetivo da SOC é conceber um estilo de projeto, tecnologia e
processos que permitam às empresas desenvolver, interconectar e manter suas
aplicações e serviços corporativos com eficiência e baixo custo. Embora esses
objetivos não sejam novos, SOC procura superar os esforços prévios como
programação modular, reuso de código e técnicas de desenvolvimento orientadas a
objetos \cite{papazoglou2007serviceApprTechRechIss}.

As vertentes mais visionárias -- não ainda concretizada e utópica para muitos
pesquisadores -- da computação orientada a serviços prevêem uma coordenação de
serviços cooperantes por todo o mundo, onde os componentes possam ser conectados
facilmente em uma rede de serviços pouquíssimo acoplados e, assim, criar
processos de negócio dinâmicos e aplicações ágeis entre organizações e plataformas de
computação \cite{leymann2005combining}.


\subsection{Terminologia}
\vspace{-6mm}

\begin{description}
\item [Computação orientada a serviço] é um termo \textit{guarda-chuva} para
descrever uma nova geração de computação distribuída. Desse modo, é um conceito
que engloba várias coisas, como paradigmas e princípios de projeto, catálogo de
padrões de projeto, padronização de linguagem, modelo arquitetural específico, e
conceitos correlacionados, tecnologias e plataformas.
A computação orientada a serviços é baseada em modelos anteriores de computação
distribuída e os extendem com novas camadas de projeto, aspectos de governança,
e uma grande gama de tecnologias de implementações especializadas, em grande
parte baseadas em \ws{} \cite{erl2009web}.

\item [Orientação a serviço] é um paradígma de projeto cuja intenção é a criação
de unidades lógicas moldadas individualmente para podem serem utilizadas
conjutamente e repetidamente para se atender a objetivos e funções específicos
associados com SOA e computação orientada a serviço.

A lógica concebida de acordo com orientação a serviço pode ser designada de
\textbf{orientada a serviço}, e as unidades da lógica orientada a serviço são
referenciadas como \textbf{serviços}. Como um paradigma de computação
distribuída, a orientação a serviço pode ser comparada a orientação a objetos,
de onde advém várias de suas raízes, além da influência de EAI, BMP e \ws
\cite{erl2009web}.

A orientação a serviços é composta principalmente de oito princípios de projeto
(descritos na seção \ref{PrincipiosSOA}).

\item [Arquitetura orientada a serviço - SOA] representa um modelo arquitetural
cujo objetivo é elevar a agilidade e a redução de custos e ao mesmo tempo
reduzir o peso da TI para a organização. Isso é feito colocando o serviço no
como elemento central da representação lógica da solução \cite{erl2009web}.

Como uma arquitetura tecnológica, uma implementação SOA consiste da combinação
de tecnologias, produtos, APIs, extensões da infraestrutura, etc. A implantação
concreta de uma arquitetura orientada a serviço é única para cada organização,
entretanto é caracterizada pela introdução de tecnologias e plataformas que
suportam a criação, execução e evolução de soluções orientadas a serviços. O
resultado é a formação de um ambiente projetado para produzir soluções alinhadas
aos princípios de projeto de orientação a serviço.

Segundo Thomas Erl \cite{erl2009web}, o termo arquitetura orientada a serviço --
SOA -- vem sendo amplamente utilizado na mídia e nos produtos de divugação de
fabricantes que tem se tornado quase que sinônimo de computação orientada a
serviço -- SOC.

\item [Serviço] é a unidade da solução no qual foi aplicada a orientação a
serviço. É a aplicação da orientação dos princípios de projeto de orientação a
serviço que distigue uma unidade de lógica como um serviço comporada a outras
unidades de serviços que podem existir isoladamente como um objeto ou
componente \cite{erl2009web}.

Após a modelagem conceitual do serviço, os estágios de projeto e desenvolvimento
produzem um serviço que é programa de \textit{software} independente com
características específicas para suportar a realização dos objetivos associados
a computação orientada a serviço.

Cada serviço possui um contexto funcional distinto e é composto de uma lista
de capacidades relacionadas a esse contexto. Então um serviço pode ser
considerado um conjunto de capacidades descritas em seu contrato.


\item [Contrato de serviço] é o conjunto de documentos que expressam as
meta-informações do serviço, sendo a parte fundamental a que descreve a
sua interface técnica. Eles compõem o contrato técnico do serviço, cuja essência
é estabelecer uma API com as funcionalidades providas pelo serviço por meio de
suas capacidades \cite{erl2009web}.

Os serviços implementados como \ws SOAP normalmente são descritos em seu WSDL
\footnote{\ws{} \textit{Description Language}}, \textit{XML schemas} and
políticas (\textit{WS-policy}). Já os serviços implementados como \ws{} REST não
possuem uma linguagem padrão para especificação de contratos. Já foram propostas
algumas alternativas como WADL \cite{hadley2006web}, Swagger \cite{swaggerSite},
e \neoidl{} \cite{lima2015neoidl}.

O contrato de serviço também pode ser composto de documentos de leitura humana,
como os que descrevem níveis de serviços (\textit{SLA}), comportamentos e
limitações. Muitas dessas características também podem ser descritas em
linguagens formais (para processamento computacional).

No contexto de orientação a serviço, o projeto do contrato do serviço é de suma
importância de tal forma que o princípio de projeto contrato de serviço
padronizado é dedicado exclusivamente para se padronizar a criação dos contratos
de serviços \cite{erl2009web}.

\end{description}


\subsection{Objetivos, benefícios e características}
\vspace{-6mm}

De modo diferente de arquiteturas convecionais, ditas monolíticas, em que os
sistemas são concebidos agregando continuamente funcionalidades a um mesmo pacote de
\textit{software}, a arquitetura orientada a serviço prega o projeto de pequenas
aplicações distribuídas que podem ser consumidas tanto por usuários finais como
por outros serviços \cite{papazoglou2007serviceApprTechRechIss}. 

A unidade lógica da arquitetura orientada a serviços é exatamente os serviços.
Serviços são pequenos que provêem funcionalidades específicas para serem
reutilizadas em várias aplicações. Cada serviço é uma entidade isolada com
dependências limitadas de outros recursos compartilhados
\cite{serrano2014service}. Assim, é formada uma abstração entre os fornecedores
e consumidores dos serviços, por meio de baixo acoplamento, e promovendo a
flexibilidade de mudanças de implementação sem impacto aos consumidores.

A arquitetura SOC busca atingir um conjunto de objetivos e benefícios
\cite{erl2008soaDesigPatterns}:
\begin{enumerate}[label=(\alph*)] 
  \item Ampliar a iterperabilidade intrínseca, de modo a se ter uma rápida
  resposta a mudanças de requisitos de negócio por meio da efetiva
  reconfiguração das composições de serviços.
  \item Ampliar a federação da solução, permitindo que os serviços possam ser
  evoluídos e governados individualmente, a partir da uniformização de
  contratos.
  \item Ampliar a diversificação de fornecedores, fazendo com que se possa
  evoluir a arquitetura em conjunto com o negócio, sem ficar restrito a
  características de derminados fornecedores.
  \item Ampliar o alinhamento entre a tecnologia e o negócio, especializando-se
  alguns serviços ao contexto do negócio e possibilitando sua evolução.
  \item Ampliar o retorno sobre investimento, pois muitos serviços podem
  ser reajandos em novas composições sem que se tenha que se construir grandes
  soluções de custo elevado.
  \item Ampliar a agilidade, remontando as composições por reduzido esforço,
  beneficiando-se do reuso interoperabilidade nativas dos serviços.
  \item Reduzir o custo de TI, como resultado de todos os benefícios acima
  citados.
\end{enumerate}

Para possibilitar que esses benefícios sejam atingidos, quatro características
são observadas em qualquer plataforma SOA. A primeira é o direcionamento
efetivo ao negócio, levando-se em conta dos objetivos estratégicos de negócio na
concepção do projeto arquitetural. Se isso não ocorrer, é inevitável que o
desalinhamento com os requisitos de negócio cheguem a níveis muito elevados
muito rapidamente \cite{erl2008soaDesigPatterns}.

A segunda característica é a independência de fabricante. O projeto arquitetural
que considere apenas um fabricante específico levará inadvertidamente a
implantação dependente de características proprietárias. Essa dependência também
reduzirá a agilidade na reação às mudanças e tornará a arquitetura inefetiva. A
arquitetura orientada a serviço deve fazer uso de tecnologias providas pelos
fornecedores, sem, no entanto, se tornar dependente dela, por meio de APIs e
protocolos padrões de mercado.

Outra característica da aplicação da plataforma SOA é os serviços são
considerados recursos corporativos, ou seja, da empresa como um todo. Serviços
desenvolvidos para atender um único objetivo perdem esta característica e se
assemelham a soluções de propósito específico, tal como soluções monolíticas. O
modelo arquitetural deve se guiar pela premissa que os serviços serão
compartilhados por várias áreas da empresa ou farão parte de soluções maiores,
como serviços compatilhados.

A capacidade de composição é a quarta característica. Os serviços devem ser
projetados não somente para serem reusados, mas também possuir
flexibilidade para serem compostos em diferentes estruturas de variadas
soluções. Confiabilidade, escalabilidade, troca de dados em tempo de execução
com integridade são pontos chave para essa característica.



\subsection{Princípios SOA}
\label{PrincipiosSOA} 
\vspace{-6mm}

O paradigma de orientação a serviço é estruturada em oito princípios
fundamentais \cite{erl2009web}. São eles que caraterizam a abordagem SOA e a sua
aplicação fazem com que um serviço se diferencie de um componente ou de
um módulo.
Os contratos de serviços permeiam a maior parte destes princípios:

\begin{description}
\item[Contrato padronizado] - \textbf{Serviços dentro de um mesmo inventário
estão em conformidade com os mesmos padrões de contrato de serviço}. 
Os contratos de serviços são elementos fundamentais na arquitetura orientada
a serviço, pois é por meio deles que os serviços interagem uns com os outros e
com potenciais consumidores. Este princípio tem como foco principal o contrato de serviço e seus requisitos. O padrão de projeto \textit{contract firts} é
uma consequência direta deste princípio \cite{erl2009web}. 

\item[Baixo acomplamento] - \textbf{Os contratos de serviços impõem aos
consumidores do serviço requisitos de baixo acoplamento e são, os próprios
contratos, desacoplados do seu ambiente}. 
Este princípio também possui forte relação com o contratos de serviço, pois a
forma como o contrato é projetado e posicionado na arquitetura é que gerará o
benefício do baixo acoplamento. O projeto deve garantir que o contrato
possua tão somente as informações necessárias para possibilitar a compreensão e
o consumo do serviço, bem como não possuir outras características que gerem
acoplamento.

São considerados negativos, e que devem ser evitados, os acoplamentos  
\begin{enumerate}[label=(\alph*)] 
\item do contrato com as funcionalidades que ele suporta, agregando ao
contrato características dos processos que o serviço suporta,
\item do contrato com a sua implementação, invertendo a estratégia de conceber
primeiramente o contrato
\item do contrato com a sua lógica interna, expondo aos consumidores
características que levem os consumidores a inadivertidamente aumentarem o
acoplamento
\item do contrato com a tecnologia do serviço, causando impactos idesejáveis em
caso de substituição de tecnologia.
\end{enumerate}

Por outro lado, há um acoplamento positivo que o que gera dependência da
lógica em relação ao contrato \cite{erl2009web}. Ou seja, idealmente a
implementação do serviço deve ser derivada do contrato, pondendo se ter inclusive a geração de código a
partir do contrato.


\item[Abstração] - \textbf{Os constratos de serviços devem conter apenas
informações essenciais e as informações sobre os serviços são limitadas àquelas
publicadas em seus contratos}. O contrato é a forma oficial a partir da qual o
consumidor do serviço faz seu projeto e tudo o que está além do contrato deve
ser desconhecido por ele. Por um lado este princípio busca a ocultação
controlada de informações. Por outro, visa a simplificação de informações do
contrato de modo a assegurar que apenas informações essenciais estão
disponíveis.


\item[Reusabilidade]- \textbf{Serviços contém e expressam lógica agnóstica e
podem ser disponibilizados como recursos reutilizáveis}. Este princípio
contribui para se entender o serviço como um produto e seu contrato com uma API
genérica para potenciais consumidores. Essa abordagem aplicada ao projeto dos
serviços leva a desenhá-lo com lógicas não dependentes de processos de negócio
específicos, de modo a torná-los reutilizáveis em vários processos.

\item[Autonomia]- \textbf{Serviços exercem um elevado nível de controle sobre
o seu ambiente em tempo de execução}. O controle do ambiente não está ligado a
dependência do serviço à sua plataforma em termos de projeto, mas sim ao aumento
da confiabilidade sobre a execução e redução da dependência dos recursos não se tem controle. 
O que se busca é a previsibilidade sobre o comportamento do serviço.

\item[Ausência de estado] - \textbf{Serviços reduzem o consumo de recursos
restringindo a gestão de estado das informações apenas a quando for necessário}.
Este princípio visa reduzir ou mesmo remover a sobrecarga gerada pelo
gerenciamento do estado de cada operação, aumentando a escalabilidade da
plataforma de arquitetura orientação a serviço como um todo. Na composição do
serviço, o serviço deve armazenar apenas os dados necessários para completar o
processamento, enquanto se aguarda o processamento de outro serviço.

\item[Descoberta de serviço] - \textbf{Serviços devem conter metadados por meio
dos quais os serviços possam ser descobertos e interpretados}. Tornar cada
serviço de fácil descoberta e interpreção pelas equipes de projeto é o foco
deste princípio. Os próprios contratos de serviço devem ser projetados para
incorporar informações que auxiliem na sua descoberta.

\item[Composição] - \textbf{Serviços são participantes efetivos de composição,
independentemente do tamanho ou complexidade da composição}. O princípio da
composição faz com que os projetos de serviços sejam projetados para
possibilitar que eles se tornem participantes de composições. Deve-se levar em
conta, entretanto, os outros princípios no planejamento de uma nova composição,
considerando a complexidade de composições formadas.

\end{description}
 
 
% avaliar a necessidade de falar de design patterns
%\subsubsection{Padrões de projeto }
%\vspace{-6mm}


\section{Web Services}
\vspace{-6mm}

\ws{} são aplicações modulares e autocontidas que podem ser publicadas,
localizadas a acessadas pela \textit{Web} \cite{alonso2004web}. A diferença
entre o \ws{} e a aplicação \textit{Web} propriamente dita é que o primeiro se
preocupa apenas com o dado gravado ou fornecido, deixando para o cliente a atribuição de apresentar a
informação \cite{serrano2014service}.

A necessidade das organizações de integrar suas soluções, seja
entre os sistemas internos ou entre esses e sistemas de outras empresas
\cite{rao2004survey}, não é recente. Essa é uma das principais motivações do uso
de \ws{}, por possibilitar que soluções contruídas com tecnologias distintas possam trocar
informações por meio da \textit{Web}. Nesse contexto, as arquiteturas
orientadas a serviço fazem amplo uso de \ws{} como meio para disponibilização de serviços.

Há dois tipos de \ws{}: baseados em SOAP e baseados em REST. Os mais diversos
tipo de aplicações podem ser concebidas utilizando SOAP ou REST \ws{}, situação também aplicável a serviços.
Originalmente os serviços utilizaram \ws{} SOAP, trafegando as informações em
uma mensagem codificada em um formato de troca de dados (XML), por meio do
protocolo SOAP (seção \ref{secaoSOAP}). Entretanto, a adoção de \ws{} REST
(seção \ref{secaoSOAP}) tem ganhado popularidade \cite{mumbaikar2013web}.

\subsection{SOAP (W3C) }
\label{secaoSOAP}
\vspace{-6mm}

SOAP -- \textit{Simple Object Access Protocol} -- é um protocolo padrão W3C que
provê uma definição de como trocar informações estruturadas, por meio de XML, entre
partes em um ambientes descentralizado ou distribuído \cite{WSDLSite}. SOAP é um
protocolo mais antigo que REST, e foi desenvolvido para troca de informações
pela Internet se utilizando de protocolos como HTTP, SMTP, FTP, sendo o primeiro
o mais comumente utilizado.

Por ser mais antigo, SOAP é o \ws{} mais comumente utilizado pela indústria.
Algumas pessoas chegam a tratar \ws{} apenas como SOAP e WSDL
\cite{serrano2014service}. SOAP atua como um envelope que transporta a mensagem
XML, e possui vastos padrões para transformar e proteger a mensagem e a
trasmissão. 


\subsubsection{Especificação de contratos}
\vspace{-6mm}

Os contratos em SOAP são especificados no padrão WSDL -- Web Services
Description Language -- que define uma gramática XML para descrever os serviços
como uma coleção de \textit{endpoints} capazes de atuar na troca de mensagens.
As mensagens e operações são descritas abstratamente na primeira seção do
documento. Uma segunda seçaõ, dita concreta, estabelece o protocolo de rede e o
formato das mensagens.

Muitas organizações preferem utilizar SOAP por ele dispor de mais mecanismos de
segurança e tratamento de erros \cite{serrano2014service}. Além disso a tipagem
de dados é mais forte em SOAP que em REST \cite{mumbaikar2013web}.


\subsection{REST (Fielding)}
\label{secaoREST}
\vspace{-6mm}

O termo REST foi criado por Roy Fielding, em sua tese de doutorado
\cite{fielding2000architectural}, para descrever um modelo arquitetural
distribuído de sistemas hipermedia. Um \ws{} REST é baseado no conceito de
recurso (que é qualquer coisa que possua uma URI) que pode ter zero ou mais
representações \cite{he2003service}.

O estilo arquitetural REST é cliente-servidor, em que o cliente enviar uma
requisitação por um determinado recurso ao servidor e este retorna uma resposta.
Tanto a requisição como a resposta ocorrem por meio da transferência de
representações de recursos \cite{mumbaikar2013web}, que podem ser vários
formatos, como XML e JSON \cite{serrano2014service}. Toda troca de informações
ocorre por meio do protocolo HTTP, com uma semântica específica para cara
operação:

\begin{enumerate}
\item HTTP GET é usado para obter a representação de um recurso.
\item HTTP DELETE é usado para remover a representação de um recurso.
\item HTTP POST é usado para atualizar ou criar a representação de um recurso.
\item HTTP PUT é usado para criar a representação de um recurso.
\end{enumerate}

As transações são independentes entre si e com as transações anteriores, pois o
servidor não guarda qualquer informação de sessão do cliente. Todas as
informações de estado são trafegadas nas proprias requisições, de modo que as
respostas também são independentes. Essas características tornam as \ws{} REST
simples e leves \cite{mumbaikar2013web}.

O uso de REST tem se tornado popular por conta de sua flexibilidade e
performance em comparação com SOAP, que precisa envelopar suas informações em
um pacote XML \cite{mumbaikar2013web}. 

\subsubsection{Especificação de contratos}
\vspace{-6mm}




\subsubsection{Outros padrões }
\vspace{-6mm}

\ldots

\section{Design-by-Contract}
\label{Design-by-Contract}
\vspace{-6mm}

\cite{meyer1988object}

\subsection{Origem}
\vspace{-6mm}

- Bertrand Meyer (eifel)

\subsection{Implementações de DbC}

 - Eifel
 - JML
 - Spec\#


